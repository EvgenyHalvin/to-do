(this["webpackJsonpcrud-ui"]=this["webpackJsonpcrud-ui"]||[]).push([[0],{14:function(e,t,a){e.exports=a(20)},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(10),o=a.n(l),i=a(12),r=a(2),s=a(5),d=a(6),m=new(function(){function e(t){Object(s.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(d.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getRecords",value:function(){return fetch("".concat(this._baseUrl,"/api/records"),{headers:this._headers}).then(this._checkResponse)}},{key:"putRecords",value:function(e){return fetch("".concat(this._baseUrl,"/api/records"),{method:"PUT",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"deleteRecord",value:function(e){return fetch("".concat(this._baseUrl,"/api/records/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"editRecord",value:function(e,t){return fetch("".concat(this._baseUrl,"/api/records/").concat(e),{method:"POST",headers:this._headers,body:JSON.stringify({data:t})}).then(this._checkResponse)}}]),e}())({baseUrl:"http://178.128.196.163:3000",headers:{"Content-Type":"application/json"}}),u=a(7),h=a(8);var _=function(e){var t=e.dataNote,a=e.isEdit,n=e.isLoaded,l=e.note,o=e.onCardClickEdit,i=e.handleChange,r=e.deleteCard,s=e.editNote;return c.a.createElement("div",{className:"table__item"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{className:"table__input table__column-name_type_name",type:"text",name:"name",placeholder:"\u0418\u043c\u044f",required:!0,value:l.name||"",onChange:i,autoFocus:!0}),c.a.createElement("input",{className:"table__input table__column-name_type_age",type:"number",name:"age",placeholder:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",required:!0,value:l.age||"",onChange:i}),c.a.createElement("input",{className:"table__input table__column-name_type_email",type:"email",name:"email",placeholder:"E-mail",required:!0,value:l.email||"",onChange:i}),c.a.createElement("input",{className:"table__input table__column-name_type_phone",type:"number",name:"phone",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",required:!0,value:l.phone||"",onChange:i}),c.a.createElement("div",{className:"table__btns-area"},c.a.createElement("button",{className:n?"spinner":a?"saveBtn":"editBtn",onClick:a?s:o,disabled:n}),c.a.createElement("button",{className:"removeBtn",onClick:r}))):t.data?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"table__text table__text_type_name"},"".concat(l.name?l.name:"\u0418\u043c\u044f \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e")),c.a.createElement("p",{className:"table__text table__text_type_age"},"  ".concat(l.age?l.age:"\u2014")),c.a.createElement("p",{className:"table__text table__text_type_email"},"  ".concat(l.email?l.email:"E-mail \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")),c.a.createElement("p",{className:"table__text table__text_type_phone"},"  ".concat(l.phone?l.phone:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")),c.a.createElement("div",{className:"table__btns-area"},c.a.createElement("button",{className:a?"saveBtn":"editBtn",onClick:o}),c.a.createElement("button",{className:"removeBtn",onClick:r}))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{padding:"0 10px",backgroundColor:"#FFDFDE",width:"671px",borderRadius:"2px"}},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442(data not found)"),c.a.createElement("div",{className:"table__btns-area"},c.a.createElement("button",{className:"editBtn editBtn_disabled"}),c.a.createElement("button",{className:"removeBtn",onClick:r}))))};var b=function(e){var t=e.dataNote,a=e.handleDeleteNote,l=Object(n.useState)(!1),o=Object(r.a)(l,2),i=o[0],s=o[1],d=Object(n.useState)(!1),b=Object(r.a)(d,2),p=b[0],N=b[1],f=Object(n.useState)({name:t.data.name,age:t.data.age,email:t.data.email,phone:t.data.phone}),v=Object(r.a)(f,2),g=v[0],E=v[1];return c.a.createElement(_,{dataNote:t,isEdit:i,isLoaded:p,note:g,onCardClickEdit:function(){s(!i)},handleChange:function(e){var t=e.target,a=t.name,n=t.value;E((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(u.a)({},a,n))}))},deleteCard:function(){return a(t)},editNote:function(){N(!0),m.editRecord(t._id,g).then((function(){s(!i)})).catch((function(e){console.log(e)})).finally((function(){N(!1)}))}})},p=a(1),N=a(13),f=a(11),v=function(e){Object(N.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).addNewName=n.addNewName.bind(Object(p.a)(n)),n.addNewAge=n.addNewAge.bind(Object(p.a)(n)),n.addNewEmail=n.addNewEmail.bind(Object(p.a)(n)),n.addNewPhone=n.addNewPhone.bind(Object(p.a)(n)),n.submitNote=n.submitNote.bind(Object(p.a)(n)),n.state={name:"",age:"",email:"",phone:""},n}return Object(d.a)(a,[{key:"addNewName",value:function(e){this.setState({name:e.target.value})}},{key:"addNewAge",value:function(e){this.setState({age:e.target.value})}},{key:"addNewEmail",value:function(e){this.setState({email:e.target.value})}},{key:"addNewPhone",value:function(e){this.setState({phone:e.target.value})}},{key:"submitNote",value:function(e){e.preventDefault();var t=this.state,a={name:t.name,age:t.age,email:t.email,phone:t.phone};return this.setState({name:"",age:"",email:"",phone:""}),this.props.handleNewNote(a)}},{key:"render",value:function(){return c.a.createElement("form",{name:"noteform",className:"table__form"},c.a.createElement("input",{className:"table__input table__column-name_type_name",type:"text",name:"name",placeholder:"\u0418\u043c\u044f",required:!0,value:this.state.name,onChange:this.addNewName,autoFocus:!0}),c.a.createElement("input",{className:"table__input table__column-name_type_age",type:"number",name:"age",placeholder:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",required:!0,value:this.state.age,onChange:this.addNewAge}),c.a.createElement("input",{className:"table__input table__column-name_type_email",type:"email",name:"email",placeholder:"E-mail",required:!0,value:this.state.email,onChange:this.addNewEmail}),c.a.createElement("input",{className:"table__input table__column-name_type_phone",type:"number",name:"phone",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",required:!0,value:this.state.phone,onChange:this.addNewPhone}),c.a.createElement("button",{type:"submit",onClick:this.submitNote,className:this.state.name.length<=1?"".concat("submit-btn"," submit-btn_disabled"):"submit-btn",disabled:this.state.name.length<=1||this.props.isLoad},c.a.createElement("div",{className:this.props.isLoad?"spinner spinner_small":"add-icon ".concat(this.state.name.length<=1?"add-icon_disabled":"add-icon_active")})))}}]),a}(c.a.Component);var g=function(e){var t=e.notes,a=e.onAddNewNote,n=e.onDeleteNote,l=e.isLoad;return c.a.createElement("div",{className:"table"},c.a.createElement("h1",{className:"table__title"},"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 CRUD"),c.a.createElement("div",{className:"table__add-area"},c.a.createElement(v,{handleNewNote:a,isLoad:l})),c.a.createElement("div",{className:"table__list"},t.map((function(e,t){return c.a.createElement(b,{key:e._id,dataNote:e,handleDeleteNote:n})}))))};var E=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),s=Object(r.a)(o,2),d=s[0],u=s[1];return c.a.useEffect((function(){m.getRecords().then((function(e){l(e)})).catch((function(e){console.log(e)}))}),[]),c.a.createElement(g,{notes:a,onAddNewNote:function(e){u(!0);var t={data:e};m.putRecords(t).then((function(e){l([].concat(Object(i.a)(a),[e]))})).catch((function(e){console.log(e)})).finally((function(){u(!1)}))},onDeleteNote:function(e){m.deleteRecord(e._id).then((function(){l(a.filter((function(t){return t._id!==e._id})))})).catch((function(e){console.log(e)}))},isLoad:d})};a(19);o.a.render(c.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))}},[[14,1,2]]]);
//# sourceMappingURL=main.d7cd5dfc.chunk.js.map